<!DOCTYPE html>
<html lang="en">
  <head>
    <title>WYLLY</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" href="" type="image/png"> 
     <!-- aqui pones tu imagen -->
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Josefin+Sans:400,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Great+Vibes" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">
    <link rel="stylesheet" href="css/aos.css">
    <link rel="stylesheet" href="css/ionicons.min.css">
    <link rel="stylesheet" href="css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="css/jquery.timepicker.css">
    <link rel="stylesheet" href="css/flaticon.css">
    <link rel="stylesheet" href="css/icomoon.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  </head>
  <body>
  	<nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
	    <div class="container">
	      <a class="navbar-brand" href="index.html">WYLLY<small></small></a>
	      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
	        <span class="oi oi-menu"></span> Menu
	      </button>
	      <div class="collapse navbar-collapse" id="ftco-nav">
	        <ul class="navbar-nav ml-auto">
	          <li class="nav-item"><a href="index.html" class="nav-link">Inicio</a></li>
	          <li class="nav-item"><a href="menu.html" class="nav-link">Productos</a></li>
	          <li class="nav-item"><a href="services.html" class="nav-link">Servicios</a></li>
	          
	          <li class="nav-item"><a href="about.html" class="nav-link">Acerca de</a></li>
	          <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="room.html" id="dropdown04" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">P치ginas</a>
              <div class="dropdown-menu" aria-labelledby="dropdown04">
                <a class="dropdown-item" href="product-single.html">Producto 칰nico</a>
                <a class="dropdown-item" href="cart.html">Carrito</a>
                <a class="dropdown-item" href="checkout.html">Verificar</a>
              </div>
            </li>
	          <li class="nav-item"><a href="contact.html" class="nav-link">Contacto</a></li>
			  <li class="nav-item cart">
				<a href="cart.html" class="nav-link">
					<span class="icon icon-shopping_cart"></span>
					<span class="bag d-flex justify-content-center align-items-center">
						<small id="cart-count">0</small>
					</span>
				</a>
			  </li>
	        </ul>
	      </div>
	    </div>
	  </nav>

    <section class="home-slider owl-carousel">
      <div class="slider-item" style="background-image: url(https://img.freepik.com/fotos-premium/grandes-auriculares-sobre-mesa_218381-13048.jpg);" data-stellar-background-ratio="0.1">
        <div class="overlay"></div>
        <div class="container">
          <div class="row slider-text justify-content-center align-items-center">
            <div class="col-md-7 col-sm-12 text-center ftco-animate">
            	<h1 class="mb-3 mt-5 bread">Carrito</h1>
	            <p class="breadcrumbs"><span class="mr-2"><a href="index.html">Inicio</a></span> <span>Carrito</span></p>
            </div>
          </div>
        </div>
      </div>
	  <div class="slider-item" style="background-image: url(https://png.pngtree.com/thumb_back/fw800/background/20231231/pngtree-sleek-white-headphones-juxtaposed-against-a-black-textured-background-with-shadow-image_13860871.png);" data-stellar-background-ratio="0.1">
        <div class="overlay"></div>
        <div class="container">
          <div class="row slider-text justify-content-center align-items-center">
            <div class="col-md-7 col-sm-12 text-center ftco-animate">
            	<h1 class="mb-3 mt-5 bread">Carrito</h1>
	            <p class="breadcrumbs"><span class="mr-2"><a href="index.html">Inicio</a></span> <span>Carrito</span></p>
            </div>
          </div>
        </div>
      </div>
    </section>

	<section class="ftco-section ftco-cart" id="cart-section">
        <div class="container">
            <div class="row">
                <div class="col-md-12 ftco-animate">
                    <div class="cart-list">
                        <table class="table">
                            <thead class="thead-primary">
                                <tr class="text-center">
                                    <th>&nbsp;</th>
                                    <th>&nbsp;</th>
                                    <th>Producto</th>
                                    <th>Precio</th>
                                    <th>Cantidad</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody id="cart-items">
                                <!-- Los productos a침adidos al carrito aparecer치n aqu칤 -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="row justify-content-end">
                <div class="col-lg-3 col-md-6 mt-5 cart-wrap ftco-animate">
                    <div class="cart-total mb-3">
                        <h3>Totales del carrito</h3>
                        <p class="d-flex">
                            <span>Total parcial</span>
                            <span id="subtotal">0.00 %</span>
                        </p>
                        <p class="d-flex">
                            <span>Descuento</span>
                            <span>0.00%</span>
                        </p>
                        <hr>
                        <p class="d-flex total-price">
                            <span>Total</span>
                            <span id="total-price">0.00 %</span>
                        </p>
                    </div>
                    <!-- Bot칩n para generar la cotizaci칩n -->
<p class="text-center">
    <button id="generate-quote" class="btn btn-secondary py-3 px-4">Generar Cotizaci칩n</button>
</p>

<style>
    #generate-quote {
    background-color: #3b9e9e;
    border: none;
    border-radius: 5px;
    color: white;
    font-size: 16px;
    padding: 12px 24px;
    cursor: pointer;
    transition: all 0.3s;
}

#generate-quote:hover {
    background-color: #317f7f;
    transform: scale(1.05);
}

</style>                   

                    <p class="text-center">
                        <a href="#" class="btn btn-primary py-3 px-4" id="checkout-button">Proceder con el pago</a>
                    </p>
                    <div id="qr-image-container" style="display: none; text-align: center; margin-top: 20px;">
                        <img id="qr-image" src="https://generator.1qr.fr/?id=3KZX0&size=4&date=202312&cache=1" alt="C칩digo QR" style="width: 200px; height: 200px;">
                    </div>
                    <p id="qr-expired-message" style="display: none; color: red; text-align: center;">El tiempo ha expirado. Intente de nuevo en 15 minutos.</p>
                    
                    <!-- Opciones de Pago -->
                    
                    <button id="cancel-button" class="btn btn-secondary py-3 px-4" style="display: none;">Cancelar</button>

                </div>
                <div id="payment-options" style="display: none;">
                    <h4>Como te Gustaria pagar</h4>
                    <button id="whatsapp-option" class="btn btn-primary py-3 px-4">Pagar con WhatsApp</button>
                    <button id="qr-option" class="btn btn-primary py-3 px-4 my-2">Pagar con QR</button>
                </div>
                
            </div>
        </div>
    </section>
    

    <section class="ftco-section">
    	<div class="container">
    		<div class="row justify-content-center mb-5 pb-3">
          <div class="col-md-7 heading-section ftco-animate text-center">
          	<span class="subheading">Descubrir</span>
            <h2 class="mb-4">M치s</h2>
            <p>Productos pensados para ti, con la mejor calidad.</p>
          </div>
        </div>
        <div class="col-md-12 d-flex align-items-center">
		    <div class="tab-content ftco-animate" id="v-pills-tabContent">
				<div class="tab-pane fade show active" id="v-pills-1" role="tabpanel" aria-labelledby="v-pills-1-tab">
					<div class="row" id="product-list">
						<!-- Los productos se renderizar치n aqu칤 -->
					</div>
				</div>
			</div>
    	</div>
    </section>


<script>
// Funci칩n para generar la cotizaci칩n en PDF y registrar el recibo en la API
document.getElementById('generate-quote').addEventListener('click', function() {
    let cartItems = document.querySelectorAll('#cart-items tr');
    let total = document.getElementById('total-price').textContent.trim();

    // Verificar si el carrito tiene productos
    if (cartItems.length === 0) {
        alert("El carrito est치 vac칤o. Agregue productos antes de generar la cotizaci칩n.");
        return;
    }

    // Crear un nuevo PDF usando jsPDF
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    // Agregar t칤tulo y fecha
    doc.setFont("helvetica", "bold");
    doc.setFontSize(18);
    doc.text("Cotizaci칩n de Productos", 105, 20, null, null, 'center');
    doc.setFontSize(12);
    doc.text(`Fecha: ${new Date().toLocaleString()}`, 10, 30);

    // Cabecera de la tabla
    doc.setFontSize(14);
    doc.text("Nombre Producto", 10, 40);
    doc.text("Cantidad", 90, 40);
    doc.text("Precio", 120, 40);
    doc.text("Total", 160, 40);

    // L칤nea horizontal
    doc.line(10, 42, 200, 42);

    let y = 50;
    let reciboData = []; // Array para almacenar los datos del recibo
    let nombreProductos = ""; // Variable para almacenar los nombres concatenados

    // Detalle de los productos del carrito
    cartItems.forEach(item => {
        let productName = item.querySelector('td:nth-child(3)').textContent;
        let productPrice = item.querySelector('td:nth-child(4)').textContent;
        let productQuantity = item.querySelector('td:nth-child(5) input') 
            ? item.querySelector('td:nth-child(5) input').value 
            : item.querySelector('td:nth-child(5)').textContent;
        let productTotal = item.querySelector('td:nth-child(6)').textContent;

        // A침adir datos al PDF
        doc.text(productName, 10, y);
        doc.text(productQuantity, 90, y);
        doc.text(productPrice, 120, y);
        doc.text(productTotal, 160, y);

        // Guardar los datos del recibo (solo los campos requeridos)
        reciboData.push({
            nombre: productName,
            cantidad: productQuantity,
            precio: productPrice,
            total: productTotal
        });

        // Concatenar los nombres de los productos para enviarlos como cadena
        nombreProductos += productName + ", ";

        y += 10;
    });

    // L칤nea horizontal final
    doc.line(10, y + 5, 200, y + 5);

    // Total final
    doc.setFont("helvetica", "bold");
    doc.text(`Total a Pagar: ${total}`, 10, y + 15);

    // Guardar el PDF
    doc.save("cotizacion.pdf");

    // Eliminar la coma extra al final de los nombres
    nombreProductos = nombreProductos.slice(0, -2); // Elimina la 칰ltima coma

    // Registrar el recibo en la API (solo los campos requeridos)
    registerReceipt(reciboData, total, nombreProductos);
});

// Funci칩n para registrar el recibo en la API
function registerReceipt(receiptData, total, nombreProductos) {
    // Crear objeto solo con los campos que quieres registrar
    const recibo = {
        totalpagar: total, // Total final de la cotizaci칩n
        nombre: nombreProductos, // Nombres de los productos concatenados
        cantidad: receiptData.map(item => item.cantidad), // Cantidades de los productos
        precio: receiptData.map(item => item.precio), // Precios de los productos
        // total: receiptData.map(item => item.total) // Totales de los productos
    };

    // Verificar que el objeto recibo tiene los datos esperados
    console.log("Datos del recibo a enviar:", recibo);

    // Enviar los datos del recibo a la API
    fetch("http://localhost:3010/api/v1/recibos", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify(recibo)
    })
    .then(response => response.json())
    .then(data => {
        console.log("Respuesta de la API:", data); // Verificar qu칠 responde la API
        alert("El recibo ha sido registrado correctamente.");
    })
    .catch(error => {
        console.error("Error al registrar el recibo:", error);
        alert("Hubo un error al registrar el recibo. Intente nuevamente.");
    });
}


</script>

    <script>
     let qrCooldown = false;

document.getElementById('checkout-button').addEventListener('click', function(event) {
    event.preventDefault();

    // Verificar si hay productos en el carrito
    let cartItems = document.querySelectorAll('#cart-items tr');
    if (cartItems.length === 0) {
        alert("El carrito est치 vac칤o. Agregue productos antes de proceder.");
        return;
    }

    // Ocultar el bot칩n de "Proceder con el pago"
    document.getElementById('checkout-button').style.display = 'none';

    // Mostrar las opciones de pago (botones de WhatsApp y QR)
    document.getElementById('payment-options').style.display = 'block';

    // Mostrar el bot칩n de cancelar
    document.getElementById('cancel-button').style.display = 'inline-block';
});

// Bot칩n para pagar con QR
document.getElementById('qr-option').addEventListener('click', function() {
    let cartItems = document.querySelectorAll('#cart-items tr');
    if (cartItems.length === 0) {
        alert("El carrito est치 vac칤o. Agregue productos antes de proceder.");
        return;
    }

    if (qrCooldown) {
        alert("Intente de nuevo en 15 minutos.");
        return;
    }

    let qrImageContainer = document.getElementById('qr-image-container');
    let qrExpiredMessage = document.getElementById('qr-expired-message');

    qrExpiredMessage.style.display = 'none';
    qrImageContainer.style.display = 'block';

    setTimeout(function() {
        qrImageContainer.style.display = 'none';
        qrExpiredMessage.style.display = 'block';

        qrCooldown = true;
        setTimeout(function() {
            qrCooldown = false;
            qrExpiredMessage.style.display = 'none';
        }, 900000); 
    }, 15000); 
});

// Bot칩n para pagar con WhatsApp
document.getElementById('whatsapp-option').addEventListener('click', function() {
    let cartItems = document.querySelectorAll('#cart-items tr');
    let total = document.getElementById('total-price').textContent;
    let cartDetails = "*Hola, estoy interesado en los siguientes productos:*\n\n";

    if (cartItems.length === 0) {
        alert("El carrito est치 vac칤o. Agregue productos antes de proceder.");
        return;
    }

    cartItems.forEach(item => {
        let productName = item.querySelector('td:nth-child(3)').textContent;
        let productPrice = item.querySelector('td:nth-child(4)').textContent;
        
        let productQuantityElement = item.querySelector('td:nth-child(5) input');
        let productQuantity = productQuantityElement 
            ? productQuantityElement.value 
            : item.querySelector('td:nth-child(5)').textContent;
            
        let productTotal = item.querySelector('td:nth-child(6)').textContent;

        cartDetails += `游 Producto: ${productName}\n` +
                       `游눳 Precio: ${productPrice}\n` +
                       `游댝 Cantidad: ${productQuantity}\n` +
                       `游눯 Total: ${productTotal}\n\n`;
    });

    cartDetails += `Total Por Pagar: ${total}\n` +
                   `驕춰Me puede Proporcionar metodos de pago por favor Gracias!`;

    let whatsappLink = `https://wa.me/?text=${encodeURIComponent(cartDetails)}`;
    window.open(whatsappLink, '_blank');
});

// Bot칩n de cancelar para restablecer
document.getElementById('cancel-button').addEventListener('click', function() {
    // Ocultar opciones de pago y bot칩n cancelar
    document.getElementById('payment-options').style.display = 'none';
    document.getElementById('cancel-button').style.display = 'none';

    // Volver a mostrar el bot칩n "Proceder con el pago"
    document.getElementById('checkout-button').style.display = 'inline-block';
    document.getElementById('qr-image-container').style.display = 'none';
    document.getElementById('qr-expired-message').style.display = 'none';
});

        </script>
	<script>

		let cart = [];

		async function fetchProducts() {
			try {
				const response = await fetch('http://localhost:3010/api/v1/productos');
				if (!response.ok) throw new Error('Network response was not ok');
				const data = await response.json();
				return data.data;
			} catch (error) {
				console.error('Error fetching products:', error);
				return [];
			}
		}

		async function renderProducts() {
			const products = await fetchProducts();
			const productContainer = document.getElementById('product-list');
	
			if (products.length === 0) {
				productContainer.innerHTML = '<p>No hay productos disponibles.</p>';
				return;
			}
			productContainer.innerHTML = products.map(product => `
				<div class="col-md-4 text-center">
					<div class="menu-wrap">
						<!-- Imagen del producto -->
							<a href="#" class="menu-img img mb-4" style="background-image: url(${product.imagen || 'https://fancycustoms.com/cdn/shop/files/133_600x.jpg?v=1723433861'});"></a>
									<div class="text">
										<!-- Nombre y descripci칩n del producto -->
										<h3><a href="#">${product.nombre}</a></h3>
										<p>${product.descripcion}</p>
										<p class="price">
											<span>${product.precio.toLocaleString('es-BO', { style: 'currency', currency: 'BOB' })}</span>
										</p>

											<!-- Calificaci칩n con estrellas -->
											<div class="rating" id="rating-${product.id}">
											<span class="star" onmouseover="highlightStars('${product.id}', 1)" onmouseout="resetStars('${product.id}')" onclick="rateProduct('${product.id}', 1)">&#9733;</span>
											<span class="star" onmouseover="highlightStars('${product.id}', 2)" onmouseout="resetStars('${product.id}')" onclick="rateProduct('${product.id}', 2)">&#9733;</span>
											<span class="star" onmouseover="highlightStars('${product.id}', 3)" onmouseout="resetStars('${product.id}')" onclick="rateProduct('${product.id}', 3)">&#9733;</span>
											<span class="star" onmouseover="highlightStars('${product.id}', 4)" onmouseout="resetStars('${product.id}')" onclick="rateProduct('${product.id}', 4)">&#9733;</span>
											<span class="star" onmouseover="highlightStars('${product.id}', 5)" onmouseout="resetStars('${product.id}')" onclick="rateProduct('${product.id}', 5)">&#9733;</span>
										</div>

										<!-- Formulario de Comentarios -->
										<div class="comment-section" id="comment-section-${product.id}" style="display: none;">
										<button class="btn btn-secondary" onclick="closeCommentSection('${product.id}')">Cerrar</button>
										<input type="text" id="name-${product.id}" placeholder="Tu nombre" class="comment-input" />
										<textarea id="comment-${product.id}" placeholder="Escribe tu comentario aqu칤..." class="comment-textarea"></textarea>
										<button class="btn btn-primary" onclick="submitComment('${product.id}')">Enviar Comentario</button>
										</div>

												
										<!-- Bot칩n de a침adir al carrito -->
										<p><a href="#" class="btn btn-primary btn-outline-primary" onclick="addToCart('${product.id}', '${product.nombre}', ${product.precio})">A침adir al carrito</a></p>
									</div>
								</div>
						</div>
					`).join('');

// Funci칩n para mostrar/ocultar el cuadro de comentarios
function toggleCommentBox(productId) {
  const commentBox = document.getElementById(`commentBox-${productId}`);
  if (commentBox) {
    // Mostrar el cuadro de comentarios si est치 oculto, o ocultarlo si est치 visible
    commentBox.style.display = (commentBox.style.display === 'none' || commentBox.style.display === '') ? 'block' : 'none';
    
    // Limpiar el cuadro de texto si se est치 mostrando
    if (commentBox.style.display === 'block') {
      const commentInput = document.getElementById(`commentInput-${productId}`);
      if (commentInput) {
        commentInput.value = ''; // Limpiar el campo de texto al mostrar
      }
    }
  }
}

// Funci칩n para enviar el comentario
function submitComment(productId) {
  const commentInput = document.getElementById(`commentInput-${productId}`);
  const commentText = commentInput ? commentInput.value.trim() : '';

  if (commentText) {
    // Aqu칤 puedes manejar la l칩gica para guardar el comentario
    console.log(`Comentario para el producto ${productId}: ${commentText}`);

    // Limpiar el cuadro de texto despu칠s de enviarlo
    commentInput.value = '';
    alert('Comentario enviado');
  } else {
    alert('Por favor, escribe un comentario.');
  }
}

		}

		function addToCart(productId, nombre, precio) {
			const existingProduct = cart.find(item => item.id === productId);
			if (existingProduct) {
				existingProduct.cantidad += 1;
			} else {
				cart.push({ id: productId, nombre, precio, cantidad: 1 });
			}
			updateCartDisplay();
		}

		function updateCartDisplay() {
			const cartItemsContainer = document.getElementById('cart-items');
			const subtotalElement = document.getElementById('subtotal');
			const totalPriceElement = document.getElementById('total-price');
			const cartCountElement = document.getElementById('cart-count');

			if (cart.length === 0) {
				cartItemsContainer.innerHTML = '<tr><td colspan="6" class="text-center">Tu carrito est치 vac칤o</td></tr>';
				subtotalElement.innerText = 'Bs 0.00';
				totalPriceElement.innerText = 'Bs 0.00';
				cartCountElement.innerText = '0';
				return;
			}

			let subtotal = 0;
			cartItemsContainer.innerHTML = cart.map((item, index) => {
				const total = item.precio * item.cantidad;
				subtotal += total;
				return `
					<tr class="text-center">
						<td class="product-remove"><a href="#" onclick="removeFromCart(${index})"><span class="icon-close"></span></a></td>
						<td class="image-prod"><div class="img" style="background-image:url('https://fancycustoms.com/cdn/shop/files/133_600x.jpg?v=1723433861');"></div></td>
						<td class="product-name"><h3>${item.nombre}</h3></td>
						<td class="price">${item.precio.toLocaleString('es-BO', { style: 'currency', currency: 'BOB' })}</td>
						<td class="quantity">
							<div class="input-group mb-3">
								<input type="number" name="quantity" class="quantity form-control input-number" value="${item.cantidad}" min="1" max="100" onchange="updateCartItem(${index}, this.value)">
							</div>
						</td>
						<td class="total">${total.toLocaleString('es-BO', { style: 'currency', currency: 'BOB' })}</td>
					</tr>
				`;
			}).join('');

			subtotalElement.innerText = subtotal.toLocaleString('es-BO', { style: 'currency', currency: 'BOB' });
			totalPriceElement.innerText = subtotal.toLocaleString('es-BO', { style: 'currency', currency: 'BOB' });
			cartCountElement.innerText = cart.reduce((sum, item) => sum + item.cantidad, 0);
		}
		function removeFromCart(index) {
			cart.splice(index, 1);
			updateCartDisplay();
		}

		function updateCartItem(index, quantity) {
			const newQuantity = parseInt(quantity);
			if (isNaN(newQuantity) || newQuantity < 1) return;
			cart[index].cantidad = newQuantity;
			updateCartDisplay();
		}

		window.addEventListener('DOMContentLoaded', () => {
			renderProducts();
			updateCartDisplay();
		});
	</script>
<!-- campo de cometeario -->
		<script>
				function closeCommentSection(productId) {
							const commentSection = document.getElementById(`comment-section-${productId}`);
							const nameInput = document.getElementById(`name-${productId}`);
							const commentTextarea = document.getElementById(`comment-${productId}`);
							
							// Oculta la secci칩n de comentarios
							commentSection.style.display = 'none';

							// Limpia los campos de entrada
							nameInput.value = '';
							commentTextarea.value = '';
						}



							function highlightStars(productId, rating) {
							const stars = document.querySelectorAll(`#rating-${productId} .star`);
							stars.forEach((star, index) => {
								if (index < rating) {
									star.classList.add('highlight');
								}
							});
						}

						function resetStars(productId) {
							const stars = document.querySelectorAll(`#rating-${productId} .star`);
							stars.forEach((star) => {
								star.classList.remove('highlight');
							});
						}

						function rateProduct(productId, rating) {
							// Guardar la calificaci칩n (puedes integrarlo con tu backend o almacenarlo localmente)
							console.log(`Producto ID: ${productId} calificado con ${rating} estrellas`);

							// Cambiar el color de las estrellas al hacer clic
							const stars = document.querySelectorAll(`#rating-${productId} .star`);
							stars.forEach((star, index) => {
								if (index < rating) {
									star.classList.add('selected');
								} else {
									star.classList.remove('selected');
								}
							});

							// Mostrar la secci칩n de comentarios despu칠s de calificar
							const commentSection = document.getElementById(`comment-section-${productId}`);
							commentSection.style.display = 'block'; // Mostrar la secci칩n de comentarios
						}
						// Funci칩n para registrar el comentario y enviarlo a la API
						function submitComment(productId) {
							// Obtener los valores del formulario de comentario
							const nameInput = document.getElementById(`name-${productId}`);
							const commentBox = document.getElementById(`comment-${productId}`);
							const nameText = nameInput.value;
							const commentText = commentBox.value;

							// Verificar que ambos campos est칠n llenos
							if (nameText && commentText) {
								console.log(`Comentario de ${nameText} para el producto ID ${productId}: ${commentText}`);
								
								// Preparar los datos para el POST con los campos correctos
								const data = {
									productos_id: productId,  // Usamos el ID del producto
									nombre: nameText,          // El nombre ingresado por el usuario
									comentario: commentText    // El comentario ingresado por el usuario
								};

								// Enviar comentario a la API
								fetch('http://localhost:3010/api/v1/comentarios', {
									method: 'POST',
									headers: {
										'Content-Type': 'application/json',  // Tipo de contenido como JSON
									},
									body: JSON.stringify(data),  // Convertir los datos a JSON
								})
								.then(response => {
									if (!response.ok) {
										throw new Error('Error en la solicitud');
									}
									return response.json();
								})
								.then(data => {
									console.log('Comentario enviado con 칠xito:', data);
									// Limpiar los cuadros de texto y ocultar la secci칩n de comentarios
									nameInput.value = '';
									commentBox.value = '';
									const commentSection = document.getElementById(`comment-section-${productId}`);
									commentSection.style.display = 'none';
									alert('Gracias por tu comentario.');
								})
								.catch((error) => {
									console.error('Error al enviar el comentario:', error);
									alert('Hubo un error al enviar el comentario. Intenta nuevamente.');
								});
							} else {
								// Si los campos est치n vac칤os, mostrar un mensaje de alerta
								alert("Por favor, completa todos los campos antes de enviar.");
							}
						}

		</script>
	<!-- campo de cometeario -->
<footer class="ftco-footer ftco-section img">
	<div class="overlay"></div>
  <div class="container">
	<div class="row mb-5">
	  <div class="col-lg-3 col-md-6 mb-5 mb-md-5">
		<div class="ftco-footer-widget mb-4">
		  <h2 class="ftco-heading-2">Sobre Nosotros</h2>
		  <p>Calidad y buenos precios para una compra f치cil y satisfactoria</p>
		  <ul class="ftco-footer-social list-unstyled float-md-left float-lft mt-5">
			<li class="ftco-animate"><a href="#"><span class="icon-twitter"></span></a></li>
			<li class="ftco-animate"><a href="#"><span class="icon-facebook"></span></a></li>
			<li class="ftco-animate"><a href="#"><span class="icon-instagram"></span></a></li>
		  </ul>
		</div>
	  </div>
	  <div class="col-lg-4 col-md-6 mb-5 mb-md-5">
		<div class="ftco-footer-widget mb-4">
		  <h2 class="ftco-heading-2">Mas vendidas</h2>
		  <div class="block-21 mb-4 d-flex">
			<a class="blog-img mr-4" style="background-image: url(images/image_1.jpg);"></a>
			<div class="text">
			  <h3 class="heading"><a href="#">Auriculares verde Claro</a></h3>
			  <div class="meta">
				<div><a href="#"><span class="icon-calendar"></span> Sept 15, 2018</a></div>
				<div><a href="#"><span class="icon-person"></span> Admin</a></div>
				<div><a href="#"><span class="icon-chat"></span> 19</a></div>
			  </div>
			</div>
		  </div>
		  <div class="block-21 mb-4 d-flex">
			<a class="blog-img mr-4" style="background-image: url(images/image_2.jpg);"></a>
			<div class="text">
			  <h3 class="heading"><a href="#">Smartband Arco칤ris</a></h3>
			  <div class="meta">
				<div><a href="#"><span class="icon-calendar"></span> Sept 15, 2018</a></div>
				<div><a href="#"><span class="icon-person"></span> Admin</a></div>
				<div><a href="#"><span class="icon-chat"></span> 19</a></div>
			  </div>
			</div>
		  </div>
		</div>
	  </div>
	  <div class="col-lg-2 col-md-6 mb-5 mb-md-5">
		 <div class="ftco-footer-widget mb-4 ml-md-4">
		  <h2 class="ftco-heading-2">Servicios</h2>
		  <ul class="list-unstyled">
			<li><a href="#" class="py-2 d-block">Facil de Ordenar</a></li>
			<li><a href="#" class="py-2 d-block">Servicio Rapido</a></li>
			<li><a href="#" class="py-2 d-block">Productos de calidad</a></li>
			
		  </ul>
		</div>
	  </div>
	  <div class="col-lg-3 col-md-6 mb-5 mb-md-5">
		<div class="ftco-footer-widget mb-4">
			<h2 class="ftco-heading-2">Tienes alguna Pregunta?</h2>
			<div class="block-23 mb-3">
			  <ul>
				<li><span class="icon icon-map-marker"></span><span class="text">Sucre Calvo 18</span></li>
				<li>
  <a href="https://wa.me/59171014010?text=Quiero%20felicitarte%20por%20el%20excelente%20trabajo%20%F0%9F%8C%9F" target="_blank" rel="noopener noreferrer">
    <span class="icon icon-phone"></span>
    <span class="text">+591 71014010</span>
  </a>
</li>

				<li><a href="#"><span class="icon icon-envelope"></span><span class="text">chirininae@gmail.com</span></a></li>
			  </ul>
			</div>
		</div>
	  </div>
	</div>
	<div class="row">
	  <div class="col-md-12 text-center">

		<p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
	<p>Copyright &copy;<script>document.write(new Date().getFullYear());</script> Efrain Chiri Nina | Todos los derechos reservados. Desarrollado en la carrera de Sistemas Inform치ticos <i class="icon-heart" aria-hidden="true"></i>.</p>

	<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
	</div>
	</div>
	</div>
	</footer>

		<!-- loader -->
		<div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>

    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-migrate-3.0.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.easing.1.3.js"></script>
    <script src="js/jquery.waypoints.min.js"></script>
    <script src="js/jquery.stellar.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/aos.js"></script>
    <script src="js/jquery.animateNumber.min.js"></script>
    <script src="js/bootstrap-datepicker.js"></script>
    <script src="js/scrollax.min.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>












<!-- Secci칩n de chatbot -->
 
<span class="chatbox-icon-container">
    <span class="chatbox-icon">
        <img src=images/chaboot-2.png alt="Icono">
    </span>
 </span>
 
 <style>
 /* Chatbox Icon Container */
 .chatbox-icon-container {
    position: fixed;
    bottom: 2px;
    right: 2px;
    z-index: 1000;
    
 }
 
 /* Chatbox Icon Styles */
 /* icono de pricipal */
 .chatbox-ico img {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    animation: color-change 1s infinite alternate, 
               shadow-pulse 2s infinite ease-in-out, 
               glow-effect 1s infinite alternate;
    transition: transform 0.5s ease, filter 0.5s ease, box-shadow 0.5s ease, opacity 0.5s ease;
 }
 /* icono vista principal clik  */
 .chatbox-icon img {
    width: 65px;
    height: 65px;
    border-radius: 60%;
    animation: color-change 4s infinite alternate, 
               shadow-pulse 2s infinite ease-in-out, 
               scale-rotate 0s infinite ease-in-out, 
               glow-effect 1.5s infinite alternate;
 }
 

 
 /* Shadow Pulse Animation */
 @keyframes shadow-pulse {
    0%, 100% {
        box-shadow: 0 0 20px rgba(255, 255, 255, 0.6);
    }
    50% {
        box-shadow: 0 0 40px rgb(3, 47, 190);
    }
    50% {
        box-shadow: 0 0 40px rgb(197, 231, 3);
    }
 }
 
 /* Scale and Rotate Animation */
 @keyframes scale-rotate {
    0%, 100% {
        transform: scale(1) rotate(0deg);
    }
    50% {
        transform: scale(1.2) rotate(360deg);
    }
 }
 
 /* Glow Effect Animation */
 @keyframes glow-effect {
    0% {
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
    }
    50% {
        text-shadow: 0 0 20px rgb(7, 61, 238);
    }
    100% {
        text-shadow: 0 0 10px rgba(2, 81, 250, 0.5);
    }
 }
 
 /* Hover Effect */
 .chatbox-icon img:hover {
    animation: none; /* Disable previous animations on hover */
    transform: scale(1.1); /* Slightly enlarge the icon */
    filter: brightness(1.2); /* Increase brightness */
    opacity: 0.8; /* Slightly reduce opacity for a glowing effect */
    position: relative;
 }
 
 .chatbox-icon img:hover::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255, 0, 255, 0.5), rgba(0, 255, 255, 0.5));
    border-radius: 50%;
    transform: translate(-50%, -50%) scale(0);
    animation: bubble-effect 1s forwards;
 }
 
 /* Bubble Effect Animation */
 @keyframes bubble-effect {
    to {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0;
    }
 }
 .button-container {
    text-align: center;
    margin-top: 20px; /* Espaciado superior */
}

.modern-button {
    position: relative; /* Posici칩n relativa para los pseudo-elementos */
    background: linear-gradient(135deg, #5b83f0, #e8e8e8); /* Degradado de fondo */
    color: rgb(8, 8, 8); /* Color del texto */
    border: none; /* Sin borde */
    border-radius: 30px; /* Bordes redondeados */
    padding: 12px 24px; /* Espaciado interno */
    font-size: 18px; /* Tama침o de fuente */
    font-weight: bold; /* Negrita */
    cursor: pointer; /* Cambiar cursor al pasar el mouse */
    display: flex; /* Usar flexbox */
    align-items: center; /* Centrar verticalmente */
    transition: background 0.4s ease, box-shadow 0.4s ease; /* Transici칩n de fondo y sombra */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Sombra */
    overflow: hidden; /* Ocultar el texto cuando desaparezca */
}

.modern-button i {
    margin-right: 8px; /* Espacio entre 칤cono y texto */
    font-size: 20px; /* Tama침o del 칤cono */
    color: white; /* Color del 칤cono inicial */
    transition: color 0.4s ease, transform 0.4s ease; /* Transici칩n de color y transformaci칩n del 칤cono */
}

.button-text {
    transition: opacity 0.4s ease, transform 0.4s ease; /* Transici칩n de opacidad y transformaci칩n */
}

.modern-button:hover {
    background: linear-gradient(135deg, #ffffff, #ffffff); /* Cambio de degradado al pasar el mouse */
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3); /* Sombra m치s intensa al pasar el mouse */
}

.modern-button:hover .button-text {
    opacity: 0; /* Desvanecer el texto */
    transform: translateY(-10px); /* Mover el texto hacia arriba */
}

.modern-button:hover i {
    color: #052bd4; /* Cambiar color del 칤cono en hover */
    transform: scale(1.2); /* Aumentar el tama침o del 칤cono en hover */
    transition: color 0.4s ease, transform 0.4s ease; /* Transici칩n de color y tama침o */
}

 /* Chatbox Body Styles */
 .chatbox-body {
  display: none;
  position: fixed;
  bottom: 50px;
  right: 15px;
  width: 310px;
  height: 490px;
  border-radius: 30px; /* Esquinas redondeadas estilo celular */
  background-color: rgba(251, 252, 253, 0.3); /* Fondo muy transparente */
  border: 2px solid white; /* Borde blanco */
  overflow: hidden;
  font-family: 'Arial', sans-serif;
  z-index: 1000;
  transition: opacity 0.3s ease-in-out, transform 0.3s ease;
  animation: slideIn 0.5s ease-out;
  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2); /* Sombra para simular profundidad */
}

 .chatbox-body.show {
    display: flex;
    flex-direction: column;
    opacity: 1;
    transform: translateY(0);
 }
 
 /* Chatbox Header Styles */
 .chatbox-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
    color: #fff;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    animation: headerFadeIn 0.5s ease-out;
    border-color: #00bcd4;
 }
 
 .chatbox-header-icon {
    font-size: 30px;
 }
 
 .chatbox-toggle {
    background: none;
    border: none;
    color: #fff;
    font-size: 26px;
    cursor: pointer;
    transition: color 0.3s ease;
 }
 
 .chatbox-toggle:hover {
    color: #ffffff;
    transform: rotate(90deg);
 }
 
 /* Chatbox Messages Styles */
 .chatbox-messages {
    padding: 20px;
    overflow-y: auto;
    flex: 1;
    border-top: 1px solid #f3f3f3;
    animation: messagesFadeIn 0.6s ease-out;
 }
 
 .message-bubble {
    border-radius: 20px;
    padding: 5px 18px;
    margin: 8px 0;
    max-width: 80%;
    position: relative;
    animation: bubbleSlideIn 0.5s ease-out;
 }
 .message-bubble.user {
    background: #616054;
    align-self: flex-end; /* Esto ya est치 correcto para alinear a la derecha */
    color: #fff;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    margin-left: auto; /* Agrega esto para empujar el mensaje hacia la derecha */
}
 
 .message-bubble.bot {
    background: rgba(111, 139, 233, 0.8); /* Fondo azul con 80% de opacidad */
    align-self: flex-start;
    color: #000000;
    padding: 5px 18px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    border-radius: 12px; /* Bordes redondeados */
    padding: 12px; /* Espacio interno */
    transition: background 0.4s ease, box-shadow 0.4s ease; /* Animaciones suaves */
 }
 
 
 /* Chatbox Input Container Styles */
 .chatbox-input-container {
    display: flex;
    padding: 10px;
    border-top: 1px solid #444;
    background: linear-gradient(135deg, #8f8b8b);
 }
 
 .chatbox-input-container input {
    flex: 50;
    border: none;
    padding: 10px;
    font-size: 11px;
    border-radius: 25px;
    color: #0a0a0a;
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.5);
    transition: background-color 0.3s, box-shadow 0.3s, transform 0.2s;
    background-color: #dddedf;
 }
 
 .chatbox-input-container input:focus {
   
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.6);
    outline: none;
    transform: scale(1.02);
 }
 .chatbox-input-container button {
    margin-left: 10px;
    background: linear-gradient(135deg, #0a0a0a);
    color: rgb(3, 82, 230);
    border: none;
    padding: 1px 2px; /* Tama침o del bot칩n sin cambios */
    border-radius: 25px;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    transition: color 0.3s; /* Solo transici칩n de color */
    font-size: 16px;
    font-weight: bold;
    display: flex; /* Para alinear el 칤cono y el texto */
    align-items: center; /* Centra verticalmente */
}

.chatbox-input-container button .icon {
    transition: transform 0.3s; /* Transici칩n para la rotaci칩n del 칤cono */
    margin-right: 5px; /* Espaciado entre el 칤cono y el texto */
}

.chatbox-input-container button:hover {
    color: #fff; /* Cambia el color del texto al pasar el cursor */
}

.chatbox-input-container button:hover .icon {
    transform: rotate(360deg); /* Rota el 칤cono 360 grados al pasar el cursor */
}


 .chatbox-input-container button::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0%;
    height: 0%;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.2), transparent);
    transition: width 0.3s, height 0.3s, top 0.3s, left 0.3s;
    border-radius: 50%;
    transform: translate(-50%, -50%);
    z-index: 0;
 }
 
 .chatbox-input-container button:hover::before {
    width: 0;
    height: 0;
    top: 50%;
    left: 50%;
 }
 
 .chatbox-input-container button:hover {
    
    transform: translateY(-5px);
 }
 
 .chatbox-input-container button span {
    position: relative;
    z-index: 1;
 }
 
 
 /* Name Input Section Styles */
 .name-input-container {
    display: flex;
    margin: 20px; /* Espaciado alrededor del contenedor */
    position: relative; /* Necesario para los pseudo-elementos */
    margin: 20px; /* Espaciado alrededor del contenedor */
    display: flex;
    position: relative; /* Necesario para los pseudo-elementos */
    display: flex;
    padding: 10px;
    border-radius: 5px;
    z-index: 10;
    animation: slideInUp 0.5s ease-out;
 }
 
 .name-input-container input {
    width: 50%; 
    border-radius: 50px; 
    padding: 14px 20px;
    font-size: 14px; 
    background-color: transparent;
    outline: none;
    position: relative;
    z-index: 1; /* Mantiene el input por encima del pseudo-elemento */
    padding: 6px;
    position: relative;
    overflow: hidden; /* Asegura que el pseudo-elemento no se salga del contenedor */
    animation: pulse 1.5s infinite; /* Aplica la animaci칩n de pulso */
 }

 .name-input-container input:focus:hover {
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4); /* Sombra m치s pronunciada */
    transform: scale(1.05); /* Agranda el input al enfocar */
    width: 55%; /* Aumenta el ancho ligeramente cuando est치 en foco */
    transition: all 0.4s ease; /* Transici칩n m치s larga para el efecto hover */
 
 }
 
 @keyframes pulse {
    
    50% {
       box-shadow: 0 0 20px rgba(255, 255, 255, 0.7);
    }
    100% {
       box-shadow: 0 0 0 rgba(5, 83, 228, 0.7);
    }
 }

 .name-input-container input:focus::before {
    transform: scaleY(1); /* Expande el pseudo-elemento */
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    transform: scaleY(0); /* Inicialmente colapsado */
    transform-origin: bottom; /* Animaci칩n desde el fondo hacia arriba */
    transition: transform 0.3s ease;
    z-index: 0; /* Coloca el pseudo-elemento detr치s del input */
    content: ''; /* Contenido vac칤o para el pseudo-elemento */
    position: absolute; /* Posiciona el pseudo-elemento */
    top: 50%;
    left: 50%;
    width: 30%; /* Tama침o mayor que el input */
    height: 300%;
    border-radius: 50%; /* Forma circular */
    transform: translate(-50%, -20%) scale(1.2); /* Centra y expande el pseudo-elemento */
    z-index: -1; /* Coloca el pseudo-elemento detr치s del input */
    
 }
 /* Efecto al enfocarse */
 .name-input-container input:focus {
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.6);
    transform: scale(1.02);
 }
 /* Animations */
 @keyframes bounceIn {
    from {
        transform: scale(0.5);
        opacity: 0;
    }
    to {
        transform: scale(1);
        opacity: 1;
    }
 }
 
 @keyframes slideIn {
    from {
        transform: translateY(-20px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
 }
 
 @keyframes headerFadeIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
 }
 
 @keyframes messagesFadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
 }
 
 @keyframes bubbleSlideIn {
    from {
        transform: translateY(10px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
 }
 .chatbox-controls {
    display: flex;
    justify-content: flex-end; /* Alinear los botones a la derecha */
    padding: 0; /* Sin espaciado alrededor de los botones */
    border-radius: 8px 8px 0 0; /* Bordes redondeados en la parte superior */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* Sombra sutil */
    margin-right: 20px;
}

.action-chatbot {
    background-color: transparent; /* Fondo transparente para el bot칩n */
    border: none; /* Sin borde */
    cursor: pointer; /* Cambiar cursor al pasar sobre el bot칩n */
    padding: 3px; /* Espaciado interno para botones m치s peque침os */
    margin-left: 10px; /* Espaciado entre los botones */
    transition: transform 0.2s; /* Transiciones suaves */
    border-radius: 5px; /* Bordes redondeados */
}

.action-chatbot:hover {
    transform: scale(1.1); /* Efecto de aumento al pasar el mouse */
}
 </style>
 
<!-- ESTIO DE CHABOOT -->
 <!-- formulario de chatboot -->
<div id="chatbox-body" class="chatbox-body"><div class="button-container">
    <!-- Bot칩n para limpiar el chat -->
<div class="chatbox-control">
    <button id="chatbox-clear" class="action-chatbot">
        <span class="llimpiar">x</span>
    </button>

    <button class="close-button action-chatbot" id="chatbox-toggle">
        <span class="cerrar">-</span>
    </button>
</div>


<style>
 /* Estilo del contenedor de botones */
.chatbox-controls {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    padding: 10px;
    border-radius: 8px;
    
}

/* Estilos para los botones */
.action-chatbot {
    border: none;
    color: rgb(0, 0, 0);
    font-size: 18px;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    cursor: pointer;
    transition: background-color 0.3s, transform 0.2s;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
}

/* Hover para los botones */
.action-chatbot:hover {
    transform: scale(1.1);
}
/* Estilo del contenido de los botones */
.llimpiar, .cerrar {
    color: #070707;
    font-family: Impact, 'Arial Narrow Bold', sans-serif;
    text-align: center;
}

/* estilo de botones de chaboot opcionales */
/* Estilo moderno para los botones */
.bot-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: center;
    margin-top: 20px;
}

.modern-button {
    border: none;
    border-radius: 25px;
    color: #030303;
    font-size: 16px;
    padding: 2px 24px;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.modern-button:hover {
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    transform: translateY(-3px);
}

.modern-button:before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 300%;
    height: 300%;
  
    border-radius: 50%;
    transform: translate(-50%, -50%) scale(0);
    transition: all 0.6s ease;
}

.modern-button:hover:before {
    transform: translate(-50%, -50%) scale(1);
    opacity: 0;
}

.modern-button:focus {
    outline: none;
}

/* Estilo para los mensajes del bot y del usuario */
.bot-message, .user-message {
    padding: 10px;
    margin: 10px;
    border-radius: 10px;
    max-width: 60%;
}

.bot-message {
    background-color: #f1f1f1;
    align-self: flex-start;
}

.user-message {
    background-color: #d1ffd1;
    align-self: flex-end;
}

/* estilo de botones de opcion de chaboot */
</style>

</div>


   <button id="chatbox-toggle" class="chatbox-toggle"></button>
   <div id="name-input-container" class="name-input-container">
       <input id="user-name" type="text" placeholder="Ingresa tu nombre..." />
   </div>
   <div class="chatbox-messages" id="chatbox-messages">
       <!-- Los mensajes aparecer치n aqu칤 -->
   </div>
   <div class="chatbox-input-container">
       <input id="chatbox-input" type="text" placeholder="Habla con Kobi..." />
       <button id="chatbox-send" class="chatbox-send">--<i class="fas fa-paper-plane"></i>--</button>
   </div>
   
</div>

</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<!-- formulario de chatboot -->
<!-- // formulario de chaboot -->

 <script>
    // limpiar
    document.getElementById('chatbox-clear').addEventListener('click', function() {
    document.getElementById('chatbox-messages').innerHTML = ''; // Clear messages
});
// limpiar

    document.getElementById('chatbox-toggle').addEventListener('click', () => {
    const commentForm = document.getElementById('chatbox-body');
    commentForm.classList.remove('show'); // Remove the 'show' class to hide the form
});
    // Show/Hide Chatbox
    document.querySelector(".chatbox-icon").addEventListener("click", function() {
       const chatboxBody = document.getElementById("chatbox-body");
       chatboxBody.classList.toggle("show");
    });
    
    // funcion de botones de chaboot

    // Handle Name Input and Enter Key
    // Agregar evento para capturar el nombre del usuario
document.getElementById("user-name").addEventListener("keypress", function(e) {
    if (e.key === 'Enter') {
        const userName = e.target.value;
        if (userName) {
            document.getElementById("name-input-container").style.display = 'none';
            document.querySelector(".chatbox-body").classList.add("show");
            addMessage(`춰Hola, Soy Kobi! 쮼n qu칠 puedo ayudarte, ${userName}?`, 'bot');
            showButtons(); // Llamar a la funci칩n para mostrar botones
        }
    }
});

// Funci칩n para mostrar los botones de acci칩n
function showButtons() {
    const buttonsHTML = `
        <div class="bot-buttons">
            <button class="modern-button" onclick="verProductos()">Ver productos</button>
            <button class="modern-button" onclick="contactarme()">Contactarme</button>
            <button class="modern-button" onclick="comentar()">Comentar</button>
            <button class="modern-button" onclick="calificar()">Calificar</button>
        </div>
    `;
    addMessage(buttonsHTML, 'bot'); // A침adir los botones como un mensaje del bot
}

// Funci칩n para agregar mensajes al chat
function addMessage(message, sender) {
    const messageContainer = document.createElement("div");
    messageContainer.className = sender === 'bot' ? 'bot-message' : 'user-message';
    messageContainer.innerHTML = message;
    document.querySelector(".chatbox-body").appendChild(messageContainer);
}

// Funciones para cada acci칩n de los botones
function verProductos() {
    window.location.href = 'menu.html'; // Redirige a menu.html
}


function contactarme() {
    const numero = "71014010"; // N칰mero de contacto
    const mensaje = `춰Hola! Me gustar칤a contactarte.`;
    
    // Mostrar el n칰mero en un mensaje
    alert(`N칰mero de contacto: ${numero}\n${mensaje}`);

    // Redirigir a WhatsApp
    const urlWhatsApp = `https://wa.me/591${71014010}?text=${encodeURIComponent(mensaje)}`;
    window.open(urlWhatsApp, '_blank'); // Abre WhatsApp en una nueva pesta침a
}



function comentar() {
    // Obtener la secci칩n del formulario de comentarios
    // window.location.href = 'menu.html';
    const opinionSection = document.getElementById('acopinion-section');

    // Si la secci칩n existe, hacer scroll hacia ella
    if (opinionSection) {
        opinionSection.scrollIntoView({ behavior: 'smooth' });
    } else {
        alert('No se encontr칩 la secci칩n de comentarios.');
    }
}



// funcion de botones de chaboot
    
   // Funci칩n para enviar mensajes
function sendMessage() {
    const messageInput = document.getElementById("chatbox-input");
    const messageText = messageInput.value;
    if (messageText) {
        addMessage(messageText, 'user');
        messageInput.value = '';
        handleBotResponse(messageText);
    }
}

// Event listener para el bot칩n de enviar
document.getElementById("chatbox-send").addEventListener("click", sendMessage);

// Event listener para la tecla Enter
document.getElementById("chatbox-input").addEventListener("keypress", function(event) {
    if (event.key === 'Enter') {
        sendMessage();
    }
});

    
    // Add Message Function
    function addMessage(text, sender) {
       const messagesContainer = document.getElementById("chatbox-messages");
       const messageBubble = document.createElement("div");
       messageBubble.classList.add("message-bubble", sender);
       messageBubble.innerHTML = text;
       messagesContainer.appendChild(messageBubble);
       messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    function calificar() {
    const rating = prompt('Por favor, califica del 1 al 5:');
    if (rating >= 1 && rating <= 5) {
        addMessage(`La Calificaci칩n de: ${rating} puntos nos impulsa a mejorar`, 'user'); // Muestra la calificaci칩n en el chat
    } else {
        alert('Calificaci칩n no v치lida. Por favor, ingresa un n칰mero del 1 al 5.');
    }
}
    // formulario de chaboot
    // Handle Bot Response
    function handleBotResponse(userMessage) {
       let response;
 
       // Simple responses based on user input
       if (userMessage.toLowerCase().includes('quiero saber m치s')) {
           response = `<p>Quieres saber m치s de los productos, h치blame aqu칤:</p>
 <a href="https://wa.link/fyld80" target="_blank" style="display: inline-block; padding: 10px 20px; margin-top: 10px; font-size: 16px; color: #ffffff; background-color: #25D366; border-radius: 5px; text-decoration: none; text-align: center;">
     <i class="fab fa-whatsapp" style="font-size: 24px; margin-right: 8px;"></i> 
 </a>
 <button style="display: inline-block; padding: 10px 20px; margin-top: 10px; font-size: 16px; color: #ffffff; background-color: #3498db; border: none; border-radius: 5px; cursor: pointer; transition: background-color 0.3s; text-align: center;">
     <i class="fas fa-info-circle" style="font-size: 24px; margin-right: 8px;"></i>
 </button>
 `;
 } else if (userMessage.toLowerCase().includes('como puedo pagar')) {
     response = `
     <div style="
         background-color: rgba(251, 252, 253, 0.3); /* Fondo con un tono de azul claro */
         border-radius: 12px; /* Bordes redondeados */
         box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15); /* Sombra m치s prominente */
         padding: 20px;
         max-width: 400px;
         margin: auto;
         text-align: center;
         transition: transform 0.3s ease, box-shadow 0.3s ease; /* Transiciones para efectos de hover */
     ">
         <h2 style="
             font-family: 'Palace Script MT', cursive; /* Fuente elegante */
             color: #004d40; /* Color verde oscuro */
             margin-bottom: 15px;
             animation: fadeIn 1s ease-in; /* Animaci칩n de entrada */
         ">쮺칩mo puedes pagar?</h2>
         <p style="
             font-size: 18px;
             color: #004d40; /* Verde oscuro para el texto */
             margin-bottom: 20px;
             animation: fadeIn 1s ease-in 0.5s; /* Animaci칩n de entrada con retraso */
         "></p>
         <div style="
             display: inline-block;
             padding: 15px;
             border: 3px solid #004d40; /* Borde verde oscuro */
             border-radius: 10px; /* Bordes redondeados */
             background-color: #ffffff; /* Fondo blanco */
             transition: transform 0.3s ease, box-shadow 0.3s ease; /* Transiciones para efectos de hover */
             animation: bounceIn 1s ease-out; /* Animaci칩n de entrada */
         ">
             <img src="/images/QRCHIRI.jpeg" 
                  alt="C칩digo QR de pago" 
                  style="
                     width: 100%; /* Ajuste de tama침o */
                     border-radius: 8px; /* Bordes redondeados */
                     transition: transform 0.3s ease; /* Transici칩n suave para hover */
                     transform: scale(1); /* Tama침o normal */
                 "
                 onmouseover="this.style.transform='scale(1.05)'" 
                 onmouseout="this.style.transform='scale(1)'"
             >
         </div>
     </div>
     <style>
         @keyframes fadeIn {
             from { opacity: 0; }
             to { opacity: 1; }
         }
         @keyframes bounceIn {
             from {
                 opacity: 0;
                 transform: scale(0.3);
             }
             50% {
                 opacity: 1;
                 transform: scale(1.1);
             }
             100% {
                 transform: scale(1);
             }
         }
     </style>`;
 }
 else if (userMessage.toLowerCase().includes('quiero pagar')) {
     response = `
     <div style="
         background-color: rgba(251, 252, 253, 0.3); /* Fondo con un tono de azul claro */
         border-radius: 12px; /* Bordes redondeados */
         box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15); /* Sombra m치s prominente */
         padding: 20px;
         max-width: 400px;
         margin: auto;
         text-align: center;
         transition: transform 0.3s ease, box-shadow 0.3s ease; /* Transiciones para efectos de hover */
     ">
         <h2 style="
             font-family: 'Palace Script MT', cursive; /* Fuente elegante */
             color: #004d40; /* Color verde oscuro */
             margin-bottom: 15px;
             animation: fadeIn 1s ease-in; /* Animaci칩n de entrada */
         ">쮺칩mo puedes pagar?</h2>
         <p style="
             font-size: 18px;
             color: #004d40; /* Verde oscuro para el texto */
             margin-bottom: 20px;
             animation: fadeIn 1s ease-in 0.5s; /* Animaci칩n de entrada con retraso */
         "></p>
         <div style="
             display: inline-block;
             padding: 15px;
             border: 3px solid #004d40; /* Borde verde oscuro */
             border-radius: 10px; /* Bordes redondeados */
             background-color: #ffffff; /* Fondo blanco */
             transition: transform 0.3s ease, box-shadow 0.3s ease; /* Transiciones para efectos de hover */
             animation: bounceIn 1s ease-out; /* Animaci칩n de entrada */
         ">
             <img src="/images/WhatsApp Image 2024-09-01 at 8.39.28 PM.jpeg" 
                  alt="C칩digo QR de pago" 
                  style="
                     width: 100%; /* Ajuste de tama침o */
                     border-radius: 8px; /* Bordes redondeados */
                     transition: transform 0.3s ease; /* Transici칩n suave para hover */
                     transform: scale(1); /* Tama침o normal */
                 "
                 onmouseover="this.style.transform='scale(1.05)'" 
                 onmouseout="this.style.transform='scale(1)'"
             >
         </div>
     </div>
     <style>
         @keyframes fadeIn {
             from { opacity: 0; }
             to { opacity: 1; }
         }
         @keyframes bounceIn {
             from {
                 opacity: 0;
                 transform: scale(0.3);
             }
             50% {
                 opacity: 1;
                 transform: scale(1.1);
             }
             100% {
                 transform: scale(1);
             }
         }
     </style>`;
 }
 
              else if (userMessage.toLowerCase().includes('hola')) {
                      response = 'Que dudas tienes';
                      
                  } else if (userMessage.toLowerCase().includes('hace envios')) {
                      response = 'El tiempo de env칤o depende de tu ubicaci칩n y del m칠todo seleccionado. Generalmente es de 3 a 7 d칤as h치biles.';
                      
                  } 
                  else if (userMessage.toLowerCase().includes('hace envios')) {
                response = 'S칤, realizamos env칤os nacionales e internacionales.';
            }

            else if (userMessage.toLowerCase().includes('tienen descuento')) {
                response = 'S칤, tenemos descuentos en productos seleccionados.';
            }

            else if (userMessage.toLowerCase().includes('c칩mo devolver un producto')) {
                response = 'Puedes devolverlo dentro de 30 d칤as.';
            }

            else if (userMessage.toLowerCase().includes('tienen tienda f칤sica')) {
                response = 'Operamos solo en l칤nea.';
            }

            else if (userMessage.toLowerCase().includes('cu치l es el horario de atenci칩n')) {
                response = 'De lunes a viernes, de 9:00 AM a 6:00 PM.';
            }

            else if (userMessage.toLowerCase().includes('cu치l es el estado de mi pedido')) {
                response = 'Puedes rastrear tu pedido con el n칰mero de seguimiento.';
            }

            else if (userMessage.toLowerCase().includes('c칩mo me contacto')) {
                response = 'Puedes contactarnos por correo, chat en vivo o redes sociales.';
            }

            else if (userMessage.toLowerCase().includes('es seguro comprar en l칤nea')) {
                response = 'S칤, usamos encriptaci칩n SSL para tu seguridad.';
            }

            else if (userMessage.toLowerCase().includes('tienen garant칤a')) {
                response = 'S칤, todos nuestros productos tienen garant칤a.';
            }
            else if (userMessage.toLowerCase().includes('quiero ver productos')) {
                response = `
                    <div class="button-container">
                        <button class="modern-button" onclick="location.href='menu.html'">
                            <i class="fas fa-shopping-cart"></i> <span class="button-text">Ver productos</span>
                        </button>
                    </div>
                `;
            }


 else if (userMessage.toLowerCase().includes('puego hacer pedido pedido')) {
           response = 'Recibir치s un correo con un n칰mero de seguimiento para puego hacer pedido tu pedido.';
       } 
        else if (userMessage.toLowerCase().includes('pago')) {
           response = 'Aceptamos y transferencias bancarias mediante QR enviando un mensaje por medio de whatsapp .';
       } else if (userMessage.toLowerCase().includes('tengo reclamo')) {
           response = 'Cont치ctanos para que podamos saber el reclamo .';
       } else if (userMessage.toLowerCase().includes('gracias')) {
           response = '춰Gracias! a ti Si necesitas algo, no dudes en dec칤rmelo. Estoy aqu칤 para ayudarte.';
       } else if (userMessage.toLowerCase().includes('como estas')) {
           response = 'Me siento como tu te estas sintiendote.';
       } else if (userMessage.toLowerCase().includes('donde es su tienda')) {
    response = '춰Gracias por tu inter칠s! Nuestra tienda se encuentra en la hermosa ciudad de Sucre, Bolivia. Aqu칤 te mostramos nuestra ubicaci칩n en vista satelital: <br><div class="map-container"><iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d382.2934918781508!2d-65.25804649999999!3d-19.048114899999996!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f35!3m3!1m2!1s0x93fbcf01f4cd4efb%3A0xe5f789cffb2cb7d6!2sInstituto%20T%C3%A9cnico%20CCA!5e0!3m2!1ses!2sbo!4v1695636720845!5m2!1ses!2sbo&t=k" width="250" height="150" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe></div><br>춰Esperamos verte pronto en nuestra tienda!';
       }
        else {
     response = `Soy un asistente virtual, as칤 que no tengo una forma f칤sica. Pero estoy aqu칤 para ayudarte  relacionada con los servicios de la Tienda. 쮿ay algo espec칤fico en lo que pueda asistirte hoy?
        
     <style>
         @keyframes fadeInUp {
             from {
                 opacity: 0;
                 transform: translateY(20px);
             }
             to {
                 opacity: 1;
                 transform: translateY(0);
             }
         }
         @keyframes rippleEffect {
             0% {
                 transform: rotate(-15deg) scale(1);
                 background: rgba(0, 150, 136, 0.2);
             }
             50% {
                 transform: rotate(-15deg) scale(1.15);
                 background: rgba(0, 150, 136, 0.25);
             }
             100% {
                 transform: rotate(-15deg) scale(1);
                 background: rgba(0, 150, 136, 0.2);
             }
         }
         @keyframes fadeIn {
             from {
                 opacity: 0;
             }
             to {
                 opacity: 1;
             }
         }
         @keyframes pulseAnimation {
             0% {
                 transform: scale(1);
                 box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
             }
             50% {
                 transform: scale(1.05);
                 box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
             }
             100% {
                 transform: scale(1);
                 box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
             }
         }
     </style>
     <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500&display=swap" rel="stylesheet">`;
 }
 
 
       setTimeout(() => addMessage(response, 'bot'), 1000);
    }
 </script>
 
 
 <!-- Seccio  de chatbooot -->


<body>
      <div id="app"></div>
      <script type="module" src="/src/main.js"></script>
</body>

</html>
